<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>WhatsApp Summarizer Settings</title>
    <style>
      :root {
        --primary: #25D366;
        --primary-hover: #128C7E;
        --danger: #dc3545;
        --danger-hover: #b02a37;
        --bg: #FFFFFF;
        --card-bg: #ffffff;
        --border: #e0e0e0;
        --text: #111827;
        --muted: #6b7280;
        --radius: 10px;
      }

      body {
        font-family: "Segoe UI", sans-serif;
        padding: 2em;
        max-width: 1100px;
        margin: auto;
        background-color: var(--bg);
        color: var(--text);
      }

      h1 {
        font-size: 1.7rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        text-align: center;
        color: var(--primary);
      }

      /* Layout */
      .grid {
        display: grid;
        gap: 2rem;
      }

      .grid-2 {
        grid-template-columns: 1fr;
      }

      @media (min-width: 900px) {
        .grid-2 {
          grid-template-columns: 1fr 1fr;
        }
      }

      /* Card style */
      .card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 1.25em;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      }

      .saved-message-card {
        max-height: 90vh;
        overflow-y: auto;
      }

      .card h3 {
        margin-top: 0;
        margin-bottom: 0.8em;
      }

      .form-group {
        margin-bottom: 1em;
      }

      label {
        display: block;
        margin-bottom: 0.4em;
        font-weight: 500;
      }

      input[type="text"],
      input[type="password"] {
        width: 100%;
        padding: 10px;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-sizing: border-box;
      }

      input[type="radio"],
      input[type="checkbox"] {
        accent-color: var(--primary);
      }

      .radio-group label {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        margin-right: 1em;
        cursor: pointer;
      }

      .note {
        font-size: 0.9em;
        color: var(--muted);
        background-color: #e8f5e9;
        padding: 0.5em;
        border-radius: var(--radius);
      }

      button {
        background-color: var(--primary);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 500;
      }

      button:hover {
        background-color: var(--primary-hover);
      }

      #status {
        margin-top: 1em;
        font-weight: 600;
        color: var(--primary);
        text-align: center;
      }

      /* Saved Messages */
      .saved-message {
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        background: #f9fafb;
      }

      .message-header {
        font-weight: 600;
        margin-bottom: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .chat-title {
        font-weight: 600;
      }

      .message-count {
        font-size: 0.8em;
        color: var(--muted);
        font-weight: normal;
      }

      .message-content {
        white-space: pre-wrap;
        background-color: #ffffff;
        padding: 8px;
        border-radius: var(--radius);
        font-family: monospace;
        max-height: 150px;
        overflow-y: auto;
        border: 1px solid var(--border);
      }

      .message-meta {
        font-size: 0.8em;
        color: var(--muted);
        margin-top: 5px;
      }

      /* Privacy Notice */
      .privacy-notice {
        background-color: #fdfdf6;
        border: 1px solid #facc15;
      }

      .privacy-notice h3 {
        color: #854d0e;
      }

      /* Danger Zone */
      .danger-zone {
        background-color: #fef2f2;
        border: 1px solid #fecaca;
      }

      .danger-zone h3 {
        color: #991b1b;
      }

      .danger-zone button {
        background-color: var(--danger);
        margin-top: 0.5em;
      }

      .danger-zone button:hover {
        background-color: var(--danger-hover);
      }

      .delete-summary-btn {
        background-color: var(--danger);
        color: white;
        border: none;
        padding: 4px 8px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.8em;
        font-weight: 500;
        transition: background-color 0.2s;
      }

      .delete-summary-btn:hover {
        background-color: var(--danger-hover);
      }

      .danger-button {
        background-color: var(--danger);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 500;
      }

      .danger-button:hover {
        background-color: var(--danger-hover);
      }
    </style>
  </head>

  <body>
    <h1>‚öôÔ∏è WhatsApp Summarizer Settings</h1>

    <!-- Row 1: Form + Saved Messages -->
    <div class="grid grid-2">
      <form id="options-form" class="card">
        <div class="form-group">
          <label for="apiKey">üîë Gemini API Key</label>
          <input type="password" id="apiKey" name="apiKey" required />
        </div>

        <div class="form-group">
          <label for="model">ü§ñ AI Model</label>
          <input type="text" id="model" name="model" readonly />
        </div>

        <div class="form-group">
          <label>üì© Default messages to summarize (N)</label>
          <div class="radio-group">
            <label><input type="radio" name="defaultN" value="50" /> 50</label>
            <label
              ><input type="radio" name="defaultN" value="100" /> 100</label
            >
            <label
              ><input type="radio" name="defaultN" value="200" /> 200</label
            >
            <label
              ><input type="radio" name="defaultN" value="300" /> 300</label
            >
          </div>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="saveSummaries" name="saveSummaries" />
            üíæ Save summaries to local history by default
          </label>
        </div>

        <div class="form-group">
          <label>üåç Language Behavior</label>
          <p class="note">Summaries will always be translated to English.</p>
        </div>

        <button type="submit">üíæ Save Settings</button>
        <div id="status"></div>
      </form>

      <div class="card saved-message-card">
        <h3>üìÇ Saved Messages</h3>
        <div id="saved-messages-list">
          <!-- Saved messages will be inserted here -->
        </div>
      </div>
    </div>

    <!-- Row 2: Privacy Notice + Danger Zone -->
    <div class="grid grid-2" style="margin-top: 2rem">
      <div class="card privacy-notice">
        <h3>üîí Privacy Notice</h3>
        <p>
          Messages are sent to Google's Gemini API for processing. Your API key
          is stored securely in browser sync storage.
        </p>
        <p>
          You can choose to save summaries locally. This data is not synced and
          will be deleted if you clear browser data or uninstall the extension.
        </p>
      </div>

      <div class="card danger-zone">
        <h3>‚ö†Ô∏è Danger Zone</h3>
        <p>
          Delete all locally stored summaries. This action cannot be undone.
        </p>
        <button id="delete-all-summaries" class="danger-button">Delete All Summaries</button>
      </div>
    </div>

    <script src="options.js"></script>
  </body>
</html>
