<!doctype html>
<html>

<head>
  <title>WA Chat Summarizer</title>
  <link rel="stylesheet" href="popup.css" />
</head>

<body>
  <div class="header">
    <h1>WA Group Summarizer</h1>
    <button id="settings-btn" title="Settings" type="button" aria-label="Settings">
      <svg width="30" height="30" viewBox="0 0 64 64" data-name="Icon Set - Black" id="Icon_Set_-_Black" xmlns="http://www.w3.org/2000/svg"
        fill="#ffffff" stroke="#ffffff">
        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
        <g id="SVGRepo_iconCarrier">
          <defs>
            <style>
              .cls-1 {
                fill: none;
                stroke: #fff;
                stroke-linecap: round;
                stroke-linejoin: round;
                stroke-width: 8px;
              }

              .cls-2 {
                fill: #000;
              }
            </style>
          </defs>
          <g id="Slider">
            <line class="cls-1" x1="10" x2="54" y1="16" y2="16"></line>
            <line class="cls-1" x1="10" x2="54" y1="32" y2="32"></line>
            <line class="cls-1" x1="10" x2="54" y1="48" y2="48"></line>
            <path d="M20,8a8,8,0,1,0,8,8,8,8,0,0,0-8-8Z"></path>
            <path d="M44,24a8,8,0,1,0,8,8,8,8,0,0,0-8-8Z"></path>
            <path d="M20,40a8,8,0,1,0,8,8,8,8,0,0,0-8-8Z"></path>
            <circle class="cls-2" cx="20" cy="16" r="3"></circle>
            <circle class="cls-2" cx="44" cy="32" r="3"></circle>
            <circle class="cls-2" cx="20" cy="48" r="3"></circle>
          </g>
        </g>
      </svg>
    </button>
  </div>
  <div class="container">
    <div id="main-content">
      <div class="n-selection">
        <span>Messages to summarize:</span>
        <div class="radio-group">
          <input type="radio" id="n50" name="n-value" value="50" checked />
          <label for="n50">50</label>
          <input type="radio" id="n100" name="n-value" value="100" />
          <label for="n100">100</label>
          <input type="radio" id="n200" name="n-value" value="200" />
          <label for="n200">200</label>
          <input type="radio" id="n300" name="n-value" value="300" />
          <label for="n300">300</label>
        </div>
      </div>

      <button id="summarize-current" class="summarize-btn">
        Summarize Current Chat
      </button>

      <div id="summary-output" style="display: none; margin-top: 15px">
        <div class="summary-content"></div>
      </div>
    </div>

    <div id="loading" style="display: none">
      <div class="spinner"></div>
      <p>Generating summary...</p>
    </div>

    <div id="status" style="display: none; color: green; margin-top: 10px"></div>

    <div id="error" style="display: none; color: #ff4444; margin-top: 10px"></div>

    <button id="copy-summary">Copy</button>
    <label>
      <input type="checkbox" id="save-summary-toggle" />
      Save Summary
    </label>
    <div id="results-panel" style="display: none">
      <h2 id="results-group-name"></h2>
    </div>

    <!-- This part is shown if API key is NOT set -->
    <div id="options-prompt" style="display: none">
      <p>Please set your Gemini API Key in the settings.</p>
      <button id="go-to-options">Open Settings</button>
    </div>
  </div>

  <script type="module" src="./popup.js"></script>
</body>

</html>
